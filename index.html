            // 移除卡片
            card.style.display = 'none';
            
            // 创建粒子
            for (let i = 0; i < particleCount; i++) {
                const particle = document.createElement('div');
                particle.classList.add('particle');
                
                // 随机位置
                const left = Math.random() * rect.width;
                const top = Math.random() * rect.height;
                
                // 随机粒子特性
                const size = Math.random() * 8 + 3;
                const angle = Math.random() * Math.PI * 2;
                const distance = Math.random() * 200 + 100;
                const duration = Math.random() * 0.8 + 0.4;
                const colorAngle = Math.random() * 90;
                const colorType = Math.random() > 0.5 ? 
                    `linear-gradient(${colorAngle}deg, #87CEEB, #B0E0E6)` :
                    `linear-gradient(${colorAngle}deg, #FFD700, #FFEC8B)`;
                
                particle.style.width = `${size}px`;
                particle.style.height = `${size}px`;
                particle.style.left = `${rect.left + left}px`;
                particle.style.top = `${rect.top + top}px`;
                particle.style.background = colorType;
                particle.style.boxShadow = `0 0 ${size/1.5}px rgba(135, 206, 235, 0.8)`;
                particle.style.animation = `shatterParticle ${duration}s forwards`;
                
                const keyframes = `
                    @keyframes shatterParticle {
                        0% { 
                            opacity: 1; 
                            transform: translate(0, 0) rotate(0);
                        }
                        100% { 
                            opacity: 0; 
                            transform: translate(${Math.cos(angle) * distance}px, ${Math.sin(angle) * distance}px) rotate(${Math.random() * 360}deg);
                        }
                    }
                `;
                
                document.styleSheets[0].insertRule(keyframes, document.styleSheets[0].cssRules.length);
                
                container.appendChild(particle);
                setTimeout(() => particle.remove(), duration * 1000);
            }
            
            // 关闭整个卡片容器
            setTimeout(() => {
                container.style.opacity = '0';
                container.style.pointerEvents = 'none';
            }, 800);
        }
        
        // ===== 自动卡片动画 =====
        function showCardAnimation() {
            const container = document.getElementById('cardContainer');
            const card = document.getElementById('birthdayCard');
            const cardInner = document.getElementById('cardInner');
            
            // 显示容器
            container.style.opacity = '1';
            container.style.pointerEvents = 'all';
            
            // 卡片飞入效果
            card.style.transition = 'transform 0.8s ease-out';
            card.style.transform = 'translateY(0)';
            
            // 3秒后翻转卡片
            setTimeout(() => {
                cardInner.style.transform = 'rotateY(180deg)';
            }, 1500);
            
            // 点击消散功能
            card.addEventListener('click', () => shatterCard(card));
            
            // 10秒后自动消散
            setTimeout(() => shatterCard(card), 10000);
        }
        
        // ===== 初始化执行 =====
        window.addEventListener('load', () => {
            createStars();         // 生成星空
            createMeteors();       // 生成流星
            setTimeout(showCardAnimation, 1000); // 启动卡片动画
        });
    </script>
</body>
</html>
